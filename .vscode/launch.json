{
    // Use IntelliSense to learn about possible attributes.
    // Hover to view descriptions of existing attributes.
    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
    "version": "0.2.0",
    "inputs": [
        {
            "id": "wrkr_lua_script",
            "type": "promptString",
            "description": "Path to Lua script to run (relative to workspace)",
            "default": "examples/plaintext.lua"
        },
        {
            "id": "wrkr_base_url",
            "type": "promptString",
            "description": "BASE_URL for the script",
            "default": "http://127.0.0.1:8080"
        }
    ],
    "configurations": [
        {
            "name": "Debug wfb-runner",
            "type": "lldb",
            "request": "launch",
            "cargo": {
                "args": [
                    "run",
                    "--bin=wfb-runner",
                    "--package=wfb-runner"
                ]
            },
            "args": [
                "run",
                "test_run_1",
                "--env",
                "local"
            ]
        },

        {
            "name": "Debug wfb-server",
            "type": "lldb",
            "request": "launch",
            "cargo": {
                "args": [
                    "run",
                    "--bin=wfb-server",
                    "--package=wfb-server"
                ]
            },
            "env": {
                "GITHUB_TOKEN": "${env:GITHUB_TOKEN}"
            },
            "args": []
        },

        {
            "name": "Debug wrkr (Lua script)",
            "type": "lua-local",
            "request": "launch",
            "program": {
                "command": "cargo",
                "communication": "pipe"
            },
            "cwd": "${workspaceFolder}",
            "args": [
                "run",
                "--bin",
                "wrkr",
                "--",
                "run",
                "${input:wrkr_lua_script}",
                "--vus",
                "1",
                "--iterations",
                "1"
            ],
            "env": {
                "BASE_URL": "${input:wrkr_base_url}"
            },
            "scriptRoots": ["${workspaceFolder}"],
            "scriptFiles": ["**/*.lua"],
            "stopOnEntry": false,
            "verbose": false
        }
    ]
}